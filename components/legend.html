<!--
    Source:
        https://stackoverflow.com/questions/37466683/create-a-legend-on-a-folium-map
            |-> Refers to: https://nbviewer.org/gist/talbertc-usgs/18f8901fc98f109f2b71156cf3ac81cd
                |-> Refers to: https://tilemill-project.github.io/tilemill/docs/guides/advanced-legends/
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery UI Draggable - Default functionality</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

  <script>
    $(function () {
      $("#maplegend").draggable({
        start: function (event, ui) {
          $(this).css({
            right: "auto",
            top: "auto",
            bottom: "auto"
          });
        }
      });
    });
  </script>
  
  <script>
    let time = 30;
    let timer = () => {
      if (time !== 0) {
        if (--time < 1) {
          $("#timer").text("Reloading...");
        } else {
          $("#timer").text("Reloading in " + time + " seconds")
        }
      }
    };
    setInterval(timer, 1000);
  </script>
</head>

<body>

  <div id='maplegend' class='maplegend' style='position: absolute; z-index:9999; border:2px solid grey; background-color:rgba(255, 255, 255, 0.8);
     border-radius:6px; padding: 10px; font-size:14px; right: 20px; bottom: 20px;'>

    <div class='legend-title'>Legend (draggable)</div>
    <div class='legend-title' id="timer" style='opacity:0.7;'>Reloading in 30 seconds</div>
    <div class='legend-scale'>
      <ul class='legend-labels'>
        <li><span style='background:#d43e2a;opacity:0.7;'></span>Now - 5 minutes ago</li>
        <li><span style='background:#f69730;opacity:0.7;'></span>5 minutes ago - 1 hour ago</li>
        <li><span style='background:#00609c;opacity:0.7;'></span>1 hour ago - 6 hours ago</li>
        <li><span style='background:#37a7da;opacity:0.7;'></span>6 hours ago - 1 day ago</li>
        <li><span style='background:#88daff;opacity:0.7;'></span>1 day ago - 3 days ago</li>
        <li><span style='background:#a3a3a3;opacity:0.7;'></span>3 days ago - older</li>
      </ul>
    </div>
  </div>

</body>

</html>

<style type='text/css'>
  .maplegend .legend-title {
    text-align: left;
    margin-bottom: 5px;
    font-weight: bold;
    font-size: 90%;
  }

  .maplegend .legend-scale ul {
    margin: 0;
    margin-bottom: 5px;
    padding: 0;
    float: left;
    list-style: none;
  }

  .maplegend .legend-scale ul li {
    font-size: 80%;
    list-style: none;
    margin-left: 0;
    line-height: 18px;
    margin-bottom: 2px;
  }

  .maplegend ul.legend-labels li span {
    display: block;
    float: left;
    height: 16px;
    width: 30px;
    margin-right: 5px;
    margin-left: 0;
    border: 1px solid #999;
  }

  .maplegend .legend-source {
    font-size: 80%;
    color: #777;
    clear: both;
  }

  .maplegend a {
    color: #777;
  }
</style>